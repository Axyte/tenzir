"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[27],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>w});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},M=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),M=r,w=d["".concat(c,".").concat(M)]||d[M]||m[M]||i;return n?a.createElement(w,o(o({ref:t},p),{},{components:n})):a.createElement(w,o({ref:t},p))}));function w(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=M;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}M.displayName="MDXCreateElement"},39072:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>u,default:()=>D,frontMatter:()=>w,metadata:()=>k,toc:()=>f});var a=n(3905),r=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,d=(e,t)=>{for(var n in t||(t={}))c.call(t,n)&&p(e,n,t[n]);if(l)for(var n of l(t))s.call(t,n)&&p(e,n,t[n]);return e},m=(e,t)=>i(e,o(t)),M=(e,t)=>{var n={};for(var a in e)c.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&l)for(var a of l(e))t.indexOf(a)<0&&s.call(e,a)&&(n[a]=e[a]);return n};const w={},u="Transform",k={unversionedId:"use/transform/README",id:"use/transform/README",title:"Transform",description:"VAST has powerful features for transforming [data in",source:"@site/docs/use/transform/README.md",sourceDirName:"use/transform",slug:"/use/transform/",permalink:"/docs/use/transform/",draft:!1,editUrl:"https://github.com/tenzir/vast/tree/master/web/docs/use/transform/README.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"Export",permalink:"/docs/use/export/"},next:{title:"Introspect",permalink:"/docs/use/introspect/"}},h={},f=[{value:"Define a pipeline",id:"define-a-pipeline",level:2},{value:"Modify data in motion",id:"modify-data-in-motion",level:2},{value:"Modify data at rest",id:"modify-data-at-rest",level:2},{value:"Delete old data when reaching storage quota",id:"delete-old-data-when-reaching-storage-quota",level:3},{value:"Transform old data when reaching storage quota",id:"transform-old-data-when-reaching-storage-quota",level:3},{value:"Transform data after exceeding a retention span",id:"transform-data-after-exceeding-a-retention-span",level:3},{value:"Trigger a compaction manually",id:"trigger-a-compaction-manually",level:3}],g={toc:f},x="wrapper";function D(e){var t=e,{components:n}=t,r=M(t,["components"]);return(0,a.kt)(x,m(d(d({},g),r),{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",d({},{id:"transform"}),"Transform"),(0,a.kt)("p",null,"VAST has powerful features for transforming ",(0,a.kt)("a",d({parentName:"p"},{href:"#modify-data-in-motion"}),"data in\nmotion")," and ",(0,a.kt)("a",d({parentName:"p"},{href:"#modify-data-at-rest"}),"data at rest"),". Both\naspects rely on ",(0,a.kt)("a",d({parentName:"p"},{href:"/docs/understand/language/pipelines"}),"pipelines")," as building\nblock."),(0,a.kt)("h2",d({},{id:"define-a-pipeline"}),"Define a pipeline"),(0,a.kt)("p",null,"To reference and use a pipeline as building block, you must add give it a unique\nname under the key ",(0,a.kt)("inlineCode",{parentName:"p"},"vast.pipelines")," in the configuration file:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-yaml"}),'vast:\n  pipelines:\n     example: |\n       hash --salt="B3IwnumKPEJDAA4u" src_ip\n       | summarize \n           pkts_toserver=sum(flow.pkts_toserver),\n           pkts_toclient=sum(flow.pkts_toclient),\n           bytes_toserver=sum(flow.bytes_toserver),\n           bytes_toclient=sum(flow.bytes_toclient),\n           start=min(flow.start),\n           end=max(flow.end)\n         by\n           src_ip,\n           dest_ip\n')),(0,a.kt)("p",null,"This ",(0,a.kt)("inlineCode",{parentName:"p"},"example")," pipeline consists of two operators, ",(0,a.kt)("inlineCode",{parentName:"p"},"hash")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"summarize")," that\nexecute in sequential order."),(0,a.kt)("p",null,"Have a look at ",(0,a.kt)("a",d({parentName:"p"},{href:"/docs/understand/language/operators"}),"all available operators")," to\nunderstand what other transformations you can apply."),(0,a.kt)("h2",d({},{id:"modify-data-in-motion"}),"Modify data in motion"),(0,a.kt)("p",null,"VAST supports ",(0,a.kt)("em",{parentName:"p"},"import")," and ",(0,a.kt)("em",{parentName:"p"},"export")," pipelines. The former apply to new data\ningested into the system, the latter apply to the results of a VAST query. Both\nimport and export pipelines can run in the server or client process. For\nimports, the client is the source generating the data, for exports the client is\nthe sink receiving the exported data."),(0,a.kt)("p",null,(0,a.kt)("figure",d({parentName:"p"},{className:"markdown-inline-svg"}),"\n  ",(0,a.kt)("svg",d({parentName:"figure"},{viewBox:"0 0 1240 507",role:"img","aria-hidden":"true"}),"eyJ2ZXJzaW9uIjoiMSIsImVuY29kaW5nIjoiYnN0cmluZyIsImNvbXByZXNzZWQiOnRydWUsImVuY29kZWQiOiJ4nO1dWVPjSFx1MDAxMn7vX0Ewr4O3su6aN1x1MDAxZkBzY5uj6Y1ccoexXHUwMDA1VmNsjy1zbcx/35SgrcuS5Vx1MDAwYkRvi+CSSlKplN+XR2WW//tlY2PTeVx1MDAxZVibf21sWk+tZtduXHUwMDBmm4+bf7r7XHUwMDFmrOHI7vfwXHUwMDEw9f5cdTAwMWb1x8OW17LjOIPRX//6V3MwKPhnXHUwMDE1Wv371zOtrnVv9ZxcdTAwMTG2/Tf+v7HxX+9n4F5Dq+U0e7ddyzvBO+TfXHUwMDBlQNDo7uN+z7s3M1pRI7meNLBHXHUwMDE1vJ9jtfHoTbM7svwj7q5Nc8fu98rHYv/Efipd1fe/0+rutX/bXHUwMDFiu9utO89dr1ujPj6Kf2zkXGb7d9al3XY6brdcIvuTzlx1MDAxYfbHt52eNXJcdTAwMWafTPb2XHUwMDA3zZbtPLvXIf7e1zFcYrZ7irRwz2BMRu5d7nf7Q/fef1x1MDAxMG/z737dbN3dYlx1MDAxN3rtSVx1MDAxYmfY7I1cdTAwMDbNIb5cdTAwMTK/3ePbUzFJXG4kuPm36lj2bcdx+6N5uFxy87tjeVx1MDAwM1x1MDAwZpxzwZQ0YnLE7cRgr+1cdMF/goPTa79ccs5PqfDlXHUwMDAy3vb84z+O2347IE/+pcaDdvP1tYNUklx1MDAwMqfUKMYnx7t271x1MDAwZVx1MDAwZvbG3a6/r9+68yXlS+Be84koVSxJQilcdTAwMTGCXHUwMDE5LjnJLKL3dUmPOFxc11x1MDAwZb4/7pRLvCG+MXgvXHUwMDExhYVElIJcYosoJcuI6Fx1MDAxZi2rzdvNuHhcdTAwMDIjcXlcZux7kz+uXHUwMDA1oVxc6bWL3+RcdTAwMWP/7MlrLPLW3uGowVx1MDAxYfS6bNXbl2d7X6/Gk0dcblx0l2M9OZuTXHUwMDAz/7z9lSbbXGafjq1Ktr3bT1x1MDAxMWvBVZJYS8VcdTAwMDXlRGeX6vThXGJLdafZ6oyH1txy3W6OOtZKuZfSXGL3UrGMYKdyL9Apwk1jwq0kl1JSZuZcdTAwMTDukGSslUT9XHUwMDE32u85dfvFXHUwMDAzklxm7d1p3tvd59B79CRcdTAwMTDHp9y1Q0Nz3Vx1MDAxY1l4T+9cIjzUuti1b11cdTAwMTndbOFcdNYwJL6OjUbIpMG93W5cdTAwMDdpu4VdaOI1h3tZ2LY/tG/tXrN7XHUwMDE27uHiulx1MDAwMkCZJFSBXHUwMDExlFwisFx1MDAwM1x1MDAwNs8sWPXLo4fDXHUwMDE3cf598K12vtc/uNI3g5NcdTAwMTXDauVcdTAwMTaNeEeLhtNcdTAwMDUsXHUwMDFhXHUwMDE5XHUwMDA1XHUwMDFkXHUwMDE1XHUwMDAyyc7w/1x1MDAxM4OGkURcdTAwMTmVXHUwMDE0+Vx1MDAwN0x2XHRttU9cdTAwMWGy0Ze1k1x1MDAxYufSKfbq9OG2lW9zRvJcXJkzwLVcdTAwMTacXHUwMDAywLqlL82e6Yj2gdkqW2e6vzWqVOrjZs2mmeyZP9Mua1n8XHUwMDA3Y0eNsdlcdTAwMWVXKbR2qlxyqE2/bHM47D/m0U4yiVx1MDAwZSpwQ6hWZlx1MDAwZUZPXHUwMDFm57xcdTAwMWFKUuTQUFwiWoLkv6KhVLeGXHUwMDBmQavnXHUwMDFkXGalXHUwMDE5PFx1MDAxZTWU3nqYXG4oq9u1XHUwMDA3o6lcdTAwMWFIXHUwMDA1PMpcYqa0Zlx1MDAxMlxiXHUwMDA3lVx1MDAxOVKkVizy4nBnVHk0z9v929vHk/JjvlVcdTAwMTCqnEJYXHRxspxcdTAwMTK6aV5cdTAwMTNcIuJo0lPApOM6XGJZjFx1MDAwMVx0sumyaErTXG7falud4+2bYqfRLtPqQPc61ihB2US1Qqq20Vudl/KLXHUwMDE0nXFn/Fi1L1x1MDAwZceN8stcbrSNQLPIXHUwMDE4hYPkS+WatI3SkIRcZmCGaTxcdTAwMWUwXHUwMDE0ZkHj4apmn9fG5/XzgXC2Oo2Hg+PDl/fzXHUwMDFmXHUwMDE2XHUwMDA1hyrgc1x1MDAxYWVQtSpcdTAwMDBcdTAwMTNcdTAwMDJcblOisD7lI01cdTAwMWMuQV33XHUwMDA2XHUwMDE3XHUwMDAzXHUwMDA2XHUwMDE1g5zHX1hE93hyp4UhUs4hd9N0T0B/ztA9p/bgVddM1T461D679nH6gyTVXHUwMDEzepKonpn0ZlFNg+52XCKegFx1MDAwM6WCXHUwMDFhmVx1MDAxOU9nzztler3TrLDvLzdFWuxuXHUwMDFmn9v5VjUgw6bbsoqGUn1tyayKJux4Q1x1MDAxNEjKUOzfXFxcdTAwMTNcdFx1MDAxZqJ1UrXDq4VcYlRcdTAwMTDfXHJYk3YwXHUwMDAxXHUwMDAwRqVZXHUwMDFiXHUwMDA2TFx1MDAwYmEyS/P+4e79zY9ar3X4XFx8LD7cfVx1MDAxZneK/bxrXHUwMDA3XHUwMDEwpiBQaFx1MDAwNFCFXHUwMDFhXHUwMDE5tFxmifd61YOmcSGfolx1MDAxZVx1MDAxOFx1MDAxOIRcdCO/on6on5zXytv50Fx1MDAwZW99SYXSK5SnYImyQCwmXHUwMDA2JjCKaFxiRIpmgSmdXXJcbiYqRIFcdTAwMGLQXHUwMDAyPWlAzSB4XGJMnKObwiXKszRUMMqXXHUwMDAxVqLm4KaAKkBcdTAwMTmpXHUwMDEx1ZJcdTAwMDampSZcdTAwMThDPVwiKMPuaI1+P2GKylhcdTAwMTBcdTAwMTeASW2kmCuO9lx1MDAwMahcdTAwMWI5zaFTsnttu3e7XHUwMDE5iuS9pVLsZTA1PJy2xqPXsVx1MDAwMYGviFx1MDAxMaKIMFRcdTAwMTN/XHUwMDA03TFoXHUwMDBlPNbE91x1MDAxY/iKR1x1MDAwYq1ee3an0l3tQKe23F5cdTAwMTEtXHUwMDE4o1JTSlx1MDAxONGSTeuVwd5QoYlhXHUwMDFjsGWsW93myCn37+9tXHUwMDA3h/+0b/ec6DB741l0Ud6xmjHKwMdcblx1MDAxZUN6tyNx8YF70bDx4P+14Vx1MDAwM8b7Z/L3f/6c2jpRlt1ta5pcdTAwMTj7V/xcdTAwMTL8PTed4VxiJ3qOmmhcIlx0XHUwMDAyJDObpXvSOWUzXHUwMDBlpsBcYo46XHUwMDEz+IXyXHUwMDE3NlxyOKdcdTAwMDVJmVx1MDAwNIWHXGZcdTAwMGImtqyQzYCSgjRohkiOX0ZcdTAwMWKfNH06i3JcdTAwMTdzZ1x1MDAwNVx1MDAxMcO/XHUwMDA2dWVmXHTEg0SDlXD0wlx1MDAxNKNC6inMpVx1MDAwYlpyxVx0tlx1MDAwMUGUSWeu8GN8LvJIXHUwMDE2ncjpmZhcIi38Slx1MDAxM91cYjRcdTAwMDMoMcGgyyyquKk/XHJOR2x8Mbw66pxccm92bl46N/n2iUXMJ+bLOVxyS4ZfOVOA1qgv/Xn1g/9Mu27Z3rXOX7rl1p5Dv1x1MDAwZaD/tfpYWsVcXFx1MDAxZpKWXCJEU1x1MDAxNlx1MDAxOLh1RV9NsksglMZvKbMr0a3+TvmlU6pdfW2rTl92qmSn947ZXHUwMDFii2JDXHUwMDE1WHL0VS9cdTAwMTU9WkXsVVM0oIhRq1x1MDAwM8ssXTlP0N9/u7+Dr1x1MDAxYoolZs6Ca1x0XHUwMDBiXHUwMDEwOjuc9o/rd+ya10W7UTree7q+/lqtJ4WrcqJoNMmXolx1MDAwMcqYQEtLrW7W/CM0Tcu+7p1tXe5eXHUwMDE5vvt4+LLXujvZ31qZplx1MDAwMcmp/7rXpmlcdTAwMTJzsJBxUE64ym6CXHUwMDFky1wivdlcdTAwMWReXHUwMDFjjL9WXHUwMDFh96fjoVx1MDAxOEPuXHUwMDAzuZrkW9EwbZCe9DtO8v3WM+7h+SNcdTAwMWYpObdcdTAwMTS0QpdGZM8mOWuOT5vDypM4f26IZ/3Y3rb+zr3RZlxiKVx1MDAxODezXHUwMDE1NS6gOMXDuOjVSWYoV5Kx5TRQUuDDuKEvY1x1MDAxOJXoxrthmDjIXCLdXHUwMDAwqaOgXHUwMDAzwjVcdTAwMTA8tu60riVRXHUwMDE3iYREo1x1MDAwNr9GPFwi8Y2621b8ZfrX+1x1MDAxMvy9iOGYXFybopkhis1cdTAwMTHKbHT2JVi356XRYens71rZ1Fx1MDAwNvIp32YjXHUwMDEwMLH8MFx1MDAxM7n9e9qN2kg3/va541x1MDAxM+PTXHUwMDFmh1x1MDAwN1x1MDAxZPu59mN7XFyR5XH7+miw+7msRp2cuVx1MDAwZpxLosCY7GbjXHUwMDBm8Xi2RVvls93BpVU5dnY6R85F3lVcdTAwMWRcdTAwMTAqg+lhNFx1MDAwNFx1MDAxM6aXdLBWXHUwMDExoVDufJyaq5rkt+G4PsNxVsFWcno/1dTL8M9egL5XXHUwMDFh3V79oLfn6qynXHUwMDBm2+37nv5efC9ls1huv4lcdTAwMDTDc1eAXHUwMDFln+lXXsGMnite/onrtahJzGFkTDGh5llcIsHafzxcdTAwMWNcYim5XHUwMDFhtdudi1a1MnRY3s0hla+KLapdn1LzXHUwMDBmrdg6UsPjamWn+LWn2qflyzKrnpfMdHMmr1x1MDAxNegyOZtcdTAwMTGkNJRcdTAwMDBkr6xKXHUwMDFmj7xWVkGwyj4npVVgOFx1MDAwMHZshVHi/NRWfUBcdTAwMTH6XGbKXaRcYj0t4z1Qq1x1MDAxN0GVclx1MDAwM0SSzKEtmuf09EKM4Fxino9qjcHOjVXb2cq5toBcYqKWn3RZac47XGLlrmBCVlx1MDAxOFhOU1x1MDAxM5XBSe+h0Wo+XHUwMDFj1uCwyJ2L0mWpt7qsd6nVyoygxKz3XHUwMDAwPUSjQcpNplx1MDAxMzJ7SdT9w8Pf91VTLJ1d7rPKrmNcdTAwMTe/fevm3ulcdTAwMDUjXHUwMDBiJJj1XHUwMDFl1lx1MDAxOWucLOGZfF5cckwzN1x1MDAxY7hmjfFcdTAwMTE+b33v+CBcdTAwMWb+rteTVFxipWS78+S5eFx1MDAwMe5qXkplz3ZPZ5XcooiSXHUwMDAyXHUwMDA1NyNcdTAwMTmRpFx1MDAwMuG6n7Mkykg0PFx1MDAxNVx1MDAxN5JcdTAwMTi9XGak1p3sLqRcdTAwMDFOKPlVpkmSUknT7Y+NUCqpXHUwMDExVFxiXHUwMDAxXHUwMDFj3DR44ztnXHUwMDFik1RSUtCMcMNcdFx1MDAxOKZAXHUwMDAxe2vxO908iU/Csb7AnGuiRlx1MDAwNoq3JIif7FOuR5Xe6Vn35bg0LP5gz6Vrdv61PlqpkZnmty3GJVxuTMEwTVx1MDAwNVxiYTTRXHUwMDExhaxMQVxud1x1MDAxYYdcdTAwMTAkXHUwMDFjLpdcbqklTt5MMT+x51x1MDAwNcY1dslcdTAwMTillVxivKifeVxylChkNzqPqo5cdTAwMDcv4pVcdTAwMWFzMYpcdTAwMDRcdTAwMWRQwJ9t4jV0bKWAXHUwMDBltY6/yznRm2hcclx1MDAwNFwiV9HkI2DgJuZlXHUwMDA2b+2l/ve9QyrVZmV4V77bXHUwMDFkcGlWm/69evB6dW2CeUVcIqjqhVx1MDAwZlx1MDAwNfd8kWJNi1x1MDAxNmqP9mJoleGbXHUwMDA2687TUvbQauE4pvzj8KqIV1x1MDAxMTBPPDBcdK9Jer5zOjp6OFx1MDAwMnqCXHUwMDEwvbPV011/f9SbrudBXHUwMDE4XHUwMDFjRaKYoVx1MDAwNs01olx1MDAwM63e9PyM6rbPnJOxxVx1MDAxM6XIO0xnXyFZXHUwMDBlvcN63kKTRJZJXtlcdTAwMTlcdTAwMDBtVzTEaHaPI726IJ88I9w0XHUwMDBlg8NsOOdcdTAwMWEto/fhXHUwMDE5KLgpO8SFLTF82qS1Rlx1MDAxMXBddi7QT+GExfOwUEVcdTAwMGK3VO436Wx61axcdTAwMDDu+9OCXHUwMDE4yTlwXHUwMDEzyIXKyDpJvUivn1xuuzigOdWaS4ZGtpGCy3gvdFx1MDAwMfCQQXBJdy1ZqmO9+mSMx5PE2d22aFSSZ10uXHUwMDExXHUwMDFk3uViwJiTXHUwMDBik0KYPJlcbo3RRril25mpMF1u80mFLFCv45Gfid58NeRHXHUwMDAzXHUwMDAxd39cbjdcdTAwMTY/0UJzNWeOzkL8NjlnSmg+3XRcdTAwMGXJ1ScuxPPlMlx1MDAxMHzVob0pwde9+0F/6Gyk5lx1MDAxZFx1MDAwNayI94nDRju1mHlEk1x1MDAxN/OhwJHcRXDh/ZlcdTAwMGLxptbE5JNcdTAwMTRcZrI3J9zNXHUwMDFklpRHZzWEMlx1MDAwNaM4lYwzpZlKXn1kWa9MK7fqWlx1MDAxOaKJmJK2XHUwMDFld8pcZlxi4Vx1MDAxYXXLJYAsaVx1MDAxZTGj+TwrTs1rXHUwMDFlXHUwMDFkMNnYrfLjb9WHTq39dHB0eNE/WJdPltSJ9KK/sI1GXHUwMDE4uOaR5ppIY9yPMJhmXHUwMDFlXHUwMDE5orhC9cO8PFx1MDAxN/HZzSPPIZwqwN7RjP5g8lx1MDAwNVbnXHUwMDBl0pT1llx1MDAxOL4siYZtdr5Lz+bOKd9cdTAwMTlTYFx1MDAxYYAyaZhcdTAwMDBcdTAwMWUu03knvkP7XHUwMDE3jVuK/jfDl66nXHUwMDA2oWZ6h1x1MDAwNHvIXHUwMDE5zDP99OvyX8w9lHTKWkdcdTAwMGJcdTAwMTJgevlKuFx1MDAxN5yiy0eJIFx1MDAxMl9cdTAwMWGYeFx1MDAxZlxcdatcXO9QIV9cdTAwMTNhPv9cdTAwMDRYkjS722LOYfLl1uVcdTAwMWNcdTAwMDZmh1wivChAXHUwMDAxuikq+1xcWrrQ5pNcdTAwMTa1kFx1MDAwNYaoVoZqxlx0RMLxhrxcdTAwMDMtUjLF8Iv7jVxiXHUwMDFhQGW15GdPLek3LlH+nuo3rrdAXG7pmi1E11x1MDAwYvmN20859Fx1MDAxYqOdWogtROLUu1x1MDAxMKiBmJDZ2cLq9e+ehtvXe5e2dXBQqVx1MDAwZm/MxWqXzl89W8jIh3bRlFx1MDAwNY2XYVx1MDAwNDBTcnPijIBcdTAwMGVcdTAwMDeVVMDap+fSkJvDSFLqddf1sTBcdTAwMWXTuLNagcSodTPN60dh5Ixpop1aiGmSy45cdTAwMDDdaymDMdxZTHP52KhcdTAwMTZLpKQub/jZ2Y2wXHUwMDBlOtW82yVRplx1MDAwMb4mppnmhMWZXHUwMDA2jFx1MDAxMMZIRX5TzTxrXHUwMDA1NTWBen97sHN3tH8sLPuk9HK1Mqph1LxjMPy1MiRnVFx1MDAxM+1UKtUkXHUwMDA2h0Akpyejy1x1MDAwNehUZyebcqkxbu+Nj3eflV182f6hjp5cdTAwMGZ53skmslRY8HNcdTAwMWJWSTZcZkxBUzdcdTAwMDAqqTZcIjgv5ydcdTAwMTF6qdBcdTAwMWN9XHUwMDFkqWho9ZyfXHUwMDBiVlJJXFz6/8j4XHUwMDBmikRQaD5bXHUwMDBl4drjwlSGTuCzz0hcdTAwMTZccneLXHSFf70vwd+rnFx1MDAwNzNKMYGef/Y1LdLpPp/Q11E7Y13QJ6TAwa221Ogoolx1MDAwMZdcdTAwMDB9iuZcdTAwMWTRSlx0XHUwMDAyctpcdTAwMTJNRDMp5ltDcPXg10YuZONnXGb+pturXHUwMDFiobCrlIxcdTAwMDW/XHUwMDAzrd7irjz2sL9cZs9QPifNJEuhu8Xlb1U0k7xyXHUwMDBl4o0rreeYbE/3X/PJMipcdTAwMWE3WZM3M6UoIchnPz9cIoeAt4bPR86gu4FcdTAwMDJYRVx1MDAxNUJcdTAwMTKJpIfXwiSCvXFnXHUwMDE1XFxlJ1xmM2TKUvgzWCSpXHUwMDE36Vx1MDAxZu25XHUwMDExnsdnmkv/p4j1YTKf/GmnjEKtZeLs9pe3XHUwMDBibDZcdTAwMDeDuoOCM1x1MDAxOeHNXHUwMDA323osTUOEt7lcdTAwMGWQNzguXHJYntz+8+Wf/1x1MDAwMaxcdTAwMTTQXHUwMDAzIn0=",(0,a.kt)("defs",{parentName:"svg"},(0,a.kt)("style",{parentName:"defs"},'@font-face{font-family:"Virgil";src:url(https://excalidraw.com/Virgil.woff2)}@font-face{font-family:"Cascadia";src:url(https://excalidraw.com/Cascadia.woff2)}')),(0,a.kt)("path",d({parentName:"svg"},{fill:"none",stroke:"#000",strokeLineCap:"round",d:"M56 206h268m-268 0h268m0 0c30.67 0 46 15.33 46 46m-46-46c30.67 0 46 15.33 46 46m0 0v92m0-92v92m0 0c0 30.67-15.33 46-46 46m46-46c0 30.67-15.33 46-46 46m0 0H56m268 0H56m0 0c-30.67 0-46-15.33-46-46m46 46c-30.67 0-46-15.33-46-46m0 0v-92m0 92v-92m0 0c0-30.67 15.33-46 46-46m-46 46c0-30.67 15.33-46 46-46"})),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#ced4da",strokeWidth:"0",d:"m131.92 188.48 119.63 1.41 3.38 2.69-2.25 23.66.56.23-7.03 4.6-118.27-.53-1.13-5.93-3.51-18.68 3.44-4.2 6.69-3.49"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M132.5 190c42.35-.44 80.26.26 115 0m-115 0c42.01-1.27 83.4-.23 115 0m0 0c3.31 1.45 6.5 3.35 7.5 7.5m-7.5-7.5c2.9-.96 9.47 1.89 7.5 7.5m0 0c-.83 5.31 1.29 10.56 0 15m0-15c.02 6.05-.82 11.62 0 15m0 0c-1.96 6.13-2.11 9.43-7.5 7.5m7.5-7.5c-.37 3.99-4.42 6.53-7.5 7.5m0 0c-26.01 2.89-55.3-.71-115 0m115 0c-41.12 1.21-82.65 1.97-115 0m0 0c-5.75.25-8.03-3.07-7.5-7.5m7.5 7.5c-6.32.81-7.59-3.3-7.5-7.5m0 0c-.53-5.95 1.28-11.24 0-15m0 15c.43-3.84-.29-8.56 0-15m0 0c-.95-6.91 3.19-7.55 7.5-7.5m-7.5 7.5c.75-5.45 1.51-6.87 7.5-7.5"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"60",y:"14",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"16",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(130 195)"}),"Client"),(0,a.kt)("path",d({parentName:"svg"},{fill:"none",stroke:"#000",strokeLineCap:"round",d:"M456 206h328m-328 0h328m0 0c30.67 0 46 15.33 46 46m-46-46c30.67 0 46 15.33 46 46m0 0v92m0-92v92m0 0c0 30.67-15.33 46-46 46m46-46c0 30.67-15.33 46-46 46m0 0H456m328 0H456m0 0c-30.67 0-46-15.33-46-46m46 46c-30.67 0-46-15.33-46-46m0 0v-92m0 92v-92m0 0c0-30.67 15.33-46 46-46m-46 46c0-30.67 15.33-46 46-46"})),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#ced4da",strokeWidth:"0",d:"m561.92 190.4 117.22-1.78 5.85 5.72-2.11 20.16 1.31 2.34-5.68 4.5-120.46-3.51-4.15-2.19.96-17.21.26-5.47 8.16-4.3"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M562.5 190c43.18 1.89 87.09 2.24 115 0m-115 0c43.13-1.73 85.68-1.39 115 0m0 0c5.85-1.82 6.67 4.22 7.5 7.5m-7.5-7.5c4.39.99 6.54 2.85 7.5 7.5m0 0c.28 5.04-1.43 6.68 0 15m0-15c.05 4.08.47 9.78 0 15m0 0c1.93 4.68-3.37 5.83-7.5 7.5m7.5-7.5c-.97 3.64-3.5 9.51-7.5 7.5m0 0c-46.07 1.2-90.42 1.81-115 0m115 0c-31.15-1.32-64.12-1.21-115 0m0 0c-5.57-1.14-6.8-2.58-7.5-7.5m7.5 7.5c-5.8 2.22-8.15-1.38-7.5-7.5m0 0c.66-4.35-1.11-9.31 0-15m0 15c-.46-5.49-.76-10.01 0-15m0 0c-.05-4.35 2.11-8.36 7.5-7.5m-7.5 7.5c.63-5.27 1.95-7.91 7.5-7.5"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"60",y:"14",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"16",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(560 195)"}),"Server"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#fab005",strokeWidth:"0",d:"M281.31 271.76c6.74 1.37 13.7 7.42 18.43 12.82 4.72 5.4 8.77 12.67 9.94 19.59s.04 15.31-2.95 21.92c-2.98 6.61-8.95 13.84-14.95 17.77-6 3.92-14.1 5.85-21.05 5.79-6.96-.06-14.66-2.28-20.66-6.14-6.01-3.86-12.16-10.68-15.36-17.04-3.2-6.35-4.81-13.95-3.84-21.08.97-7.12 5.1-15.89 9.67-21.67 4.56-5.78 10.53-11.1 17.69-13 7.16-1.9 21.01 1.28 25.28 1.62 4.27.35.68.01.32.43m-6.78-2.83c6.91.51 15.62 5.48 20.92 10.42 5.3 4.94 8.91 12.04 10.86 19.22 1.95 7.19 2.93 17.06.84 23.9-2.08 6.84-7.49 12.79-13.35 17.14-5.87 4.36-14.66 8.35-21.85 8.99-7.19.63-14.86-1.98-21.28-5.16-6.42-3.18-13.56-7.81-17.24-13.92-3.67-6.12-5.08-15.53-4.81-22.78.27-7.24 2.68-14.69 6.42-20.68 3.74-6 9.45-12.53 16.03-15.29 6.58-2.76 19.34-.99 23.47-1.29 4.13-.3 1.29-1.02 1.31-.5"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M253.8 273.87c6.27-3.45 16.59-4.88 23.67-3.95 7.09.92 13.58 4.58 18.84 9.47 5.25 4.89 10.53 12.93 12.67 19.86 2.14 6.93 2.22 14.77.19 21.73-2.04 6.96-6.69 15.12-12.4 20.04-5.71 4.91-14.52 8.71-21.86 9.46-7.34.74-15.75-1.84-22.19-4.97-6.44-3.13-12.73-7.92-16.46-13.81-3.72-5.9-6.17-14.18-5.9-21.55.27-7.37 2.56-16.36 7.52-22.68 4.96-6.32 17.92-12.64 22.21-15.22 4.3-2.58 3.59-.86 3.57-.26m-11.16 2.74c5.9-3.7 14.89-4.99 21.99-4.23 7.1.75 14.7 4.16 20.61 8.74 5.9 4.57 12.25 12.13 14.81 18.72 2.57 6.59 2.77 13.84.57 20.82s-8.31 16.16-13.76 21.05c-5.45 4.88-11.99 7.33-18.97 8.25-6.97.92-16.29-.19-22.86-2.73-6.58-2.54-12.77-6.78-16.59-12.53-3.83-5.75-5.89-14.51-6.34-21.97-.45-7.47.27-16.53 3.66-22.8 3.38-6.28 13.82-12.86 16.65-14.85 2.83-1.99-.28 1.92.33 2.91"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"34.5",y:"18",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"20",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(237.879 245.5)"}),"Pipeline"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#228be6",strokeWidth:"0",d:"M125.93 274.65c6.43 2.35 13.46 8.11 17.43 13.97 3.96 5.87 6.44 14 6.38 21.24-.06 7.25-2.86 16.2-6.74 22.24-3.88 6.04-10.25 11.13-16.56 14-6.31 2.86-14.27 4.25-21.31 3.19-7.05-1.06-15.36-4.98-20.95-9.54-5.59-4.56-10.59-10.89-12.6-17.8-2.02-6.91-1.41-16.44.52-23.65 1.93-7.2 5.61-15 11.07-19.6 5.47-4.6 14.27-7.2 21.71-8 7.43-.8 18.9 2.47 22.92 3.19 4.02.72 1.35.45 1.19 1.13m-12.08-4.67c6.84.63 14.07 4.65 19.54 9.7 5.47 5.04 11.26 13.63 13.29 20.57 2.03 6.94 1.37 14.41-1.09 21.08-2.46 6.67-8.08 14.5-13.65 18.93-5.57 4.42-12.66 6.75-19.77 7.63-7.11.88-16.43.73-22.88-2.34-6.45-3.07-12.1-9.9-15.82-16.08-3.71-6.18-6.27-13.75-6.45-21-.18-7.26 1.4-16.58 5.37-22.52 3.96-5.94 11.37-10.28 18.41-13.14 7.03-2.86 19.97-3.57 23.81-4.03 3.85-.47-.25.14-.75 1.23"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M121.24 270.84c6.72 1.05 12.96 6.19 17.66 11.64 4.69 5.45 9.14 13.94 10.51 21.04 1.38 7.1.51 14.87-2.26 21.56-2.78 6.68-8.19 14.28-14.38 18.56-6.18 4.29-15.32 7.19-22.72 7.15-7.4-.03-15.6-3.55-21.67-7.37-6.06-3.82-11.68-9.28-14.72-15.55-3.03-6.28-4.55-14.76-3.5-22.08 1.06-7.31 5.06-16.27 9.83-21.82 4.78-5.55 11.9-9.61 18.82-11.49 6.92-1.88 18.62-.01 22.7.2 4.09.21 2.04.62 1.82 1.07m2.68.1c6.4 2.26 12.66 8.63 16.88 14.71 4.23 6.07 8.12 14.78 8.46 21.73.35 6.94-2.15 13.83-6.4 19.91-4.26 6.07-12.44 13.5-19.13 16.51-6.7 3.01-14.04 2.87-21.04 1.54s-15.59-5.05-20.98-9.5c-5.38-4.46-9.55-10.5-11.34-17.21-1.79-6.71-1.17-15.89.61-23.07 1.78-7.17 4.99-15.14 10.09-19.96 5.11-4.83 13.4-8.39 20.54-8.99 7.13-.6 18.3 4.37 22.28 5.41 3.98 1.04 1.75.66 1.61.84"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"41",y:"18",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"20",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(69.516 245.5)"}),"SOURCE"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M164.172 311.556c13.29-2.45 20.93-2.86 50.24-1.21m-48.57-.47c17.43-.22 33.03.11 49.3.47"})),(0,a.kt)("path",d({parentName:"g"},{fillRule:"evenodd",strokeWidth:"0",d:"m213.192 311.186-11.15 4.15-1.47-12.56 12.66 8.26"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M214.182 311.096c-1.06-.24-6.32.78-12.87 5.2m14.12-6.45c-4.5 2.22-10.32 4.58-13.57 6.44m.54.94c-2.04-4.68-1.51-9.84-1.88-14.03m.63 13.3c.08-4.92 1.07-9.76 1.08-13.38m-1.89.62c3.21 2.43 8.31 4.67 14.56 5.95m-13.55-5.31c3.86 1.57 6.19 1.65 14.21 5.32m-.42.65s0 0 0 0m0 0s0 0 0 0"}))),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M330.646 311.454c39.62-1.01 83.85.42 120.29-.59m-120.83 1.15c41.35 1.16 85.32 1.27 120.66 1.3"})),(0,a.kt)("path",d({parentName:"g"},{fillRule:"evenodd",strokeWidth:"0",d:"m451.396 312.254-15.35 6.43-.77-11.05 15.44 6.34"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M451.776 312.444c-7.14 2-10.77 5.29-13.92 5.87m13.51-5.45c-5.86 2.4-9.77 4.72-13.63 7.28m-1.65.4c.35-3.69-.17-8.07 2.19-13.94m-1.44 13.09c.96-4.31.95-9.38.02-12.61m-1.14.71c6.22 2.72 10.21 2.73 13.8 4.89m-11.69-5.03c2.66.07 6.3 1.6 13.59 5.51m-.65.15s0 0 0 0m0 0s0 0 0 0"}))),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#fab005",strokeWidth:"0",d:"M513.69 274.7c6.91.05 15.92 3.61 21.51 8.01 5.59 4.4 9.78 11.48 12.01 18.37 2.24 6.89 2.98 15.78 1.4 22.99-1.59 7.21-5.71 15.16-10.89 20.25-5.19 5.08-13 8.95-20.23 10.25-7.22 1.31-16.42.44-23.11-2.41-6.69-2.86-12.91-8.71-17.04-14.71-4.12-6-7.49-14.28-7.7-21.29-.22-7.01 2.65-14.74 6.4-20.78 3.75-6.04 9.02-12.28 16.1-15.46 7.09-3.18 21.2-3.38 26.4-3.64 5.2-.27 4.94 1.49 4.8 2.05m-22.29-3.31c6.43-2.26 14.19-1.82 20.94.65 6.75 2.47 15.02 8.56 19.54 14.16 4.53 5.6 7.1 12.32 7.59 19.43.49 7.11-1.48 16.37-4.65 23.22-3.18 6.85-8.16 14.22-14.38 17.87-6.22 3.66-15.69 4.79-22.96 4.08-7.27-.71-15.1-3.96-20.68-8.32-5.57-4.37-10.15-11.18-12.78-17.88-2.63-6.7-3.95-15.58-2.98-22.32.96-6.75 3.97-13.2 8.79-18.14 4.83-4.94 16.7-9.78 20.14-11.49 3.44-1.71-.03.52.49 1.22"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M504.91 274.08c6.92-1.15 17.15 1.86 23.89 5.26 6.73 3.41 13.02 9.09 16.52 15.16s4.75 14.01 4.48 21.25c-.28 7.23-2.18 16.09-6.14 22.15-3.95 6.06-10.85 11.45-17.6 14.2-6.75 2.75-15.79 3.54-22.89 2.31-7.09-1.24-14.41-4.88-19.68-9.7-5.27-4.82-9.85-12.15-11.93-19.25s-2.85-16.38-.53-23.35c2.31-6.97 7.68-14.05 14.42-18.48 6.75-4.44 20.66-6.97 26.04-8.12 5.37-1.15 6.33.78 6.21 1.21m4.17 0c6.87 1.25 14.2 6.45 18.75 11.6 4.55 5.15 7.72 12.45 8.57 19.28.84 6.84-.6 15.27-3.48 21.73-2.88 6.45-7.94 12.99-13.81 16.98s-14.26 6.58-21.41 6.96c-7.16.37-15.64-.91-21.54-4.7-5.9-3.8-10.87-11.43-13.86-18.08-3-6.65-4.63-14.9-4.11-21.82.52-6.92 2.95-14.47 7.23-19.7 4.28-5.24 11.46-9.53 18.46-11.7 7-2.18 19.44-1.39 23.52-1.34 4.08.06.91 1.24.98 1.66"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"34.5",y:"18",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"20",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(477.379 250)"}),"Pipeline"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#fab005",strokeWidth:"0",d:"M740.3 275.93c6.54-2.15 16.11-1.21 22.73.81 6.62 2.03 12.37 5.73 16.97 11.34 4.6 5.61 9.51 15.06 10.63 22.33 1.12 7.26-.53 14.85-3.91 21.26-3.37 6.41-10.16 13.35-16.32 17.21-6.17 3.85-13.65 6.22-20.66 5.93-7.01-.28-15.29-3.44-21.41-7.63-6.11-4.19-12.39-11.1-15.28-17.51-2.89-6.4-3.21-14.04-2.06-20.92 1.15-6.89 3.49-14.64 8.99-20.41s19.37-12.1 24.02-14.19c4.66-2.1 3.83.88 3.92 1.62m-11.94.05c6-3.14 14.55-3.27 21.4-1.47 6.85 1.81 14.23 7.08 19.67 12.3 5.44 5.21 11.33 11.75 12.95 18.98 1.62 7.24-.43 17.53-3.22 24.44-2.8 6.91-7.68 12.78-13.55 17.03-5.87 4.24-14.74 8.24-21.68 8.44-6.93.2-14.01-3.68-19.93-7.25-5.91-3.57-12.08-8.09-15.56-14.19-3.48-6.1-5.88-14.92-5.35-22.43.54-7.5 4.1-16.83 8.56-22.6 4.46-5.78 15.26-10.05 18.21-12.03 2.95-1.98-.6-.39-.52.17"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M733.29 278.16c6.22-3.36 16.32-4.32 23.41-3.1 7.1 1.21 13.75 5.62 19.16 10.4 5.4 4.79 11.28 11.49 13.29 18.31 2.02 6.83.86 15.73-1.21 22.66-2.06 6.92-5.74 14.2-11.17 18.87-5.43 4.68-14.02 8.14-21.4 9.18-7.39 1.05-16.3.32-22.9-2.9-6.6-3.22-13.08-10.13-16.72-16.41-3.64-6.28-5.26-14.32-5.13-21.26.13-6.95 1.91-14.34 5.92-20.43s14.76-13.62 18.14-16.1c3.39-2.48 1.87.59 2.17 1.22m19.25-2.13c6.48.92 14.28 5.24 19.55 9.82 5.27 4.57 10.2 10.69 12.06 17.63 1.87 6.94 1.31 17.16-.87 24-2.17 6.85-6.79 12.59-12.19 17.07-5.4 4.49-13.12 8.83-20.2 9.82-7.08.99-15.7-.62-22.28-3.88-6.58-3.26-13.7-9.63-17.2-15.69-3.49-6.05-4.18-13.41-3.77-20.64.41-7.24 2.25-16.77 6.23-22.77 3.99-6 11.09-10.23 17.66-13.23 6.58-3.01 18.24-4.54 21.78-4.82 3.54-.29-.58 2.07-.53 3.1"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"34.5",y:"18",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"20",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(717.379 250)"}),"Pipeline"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M810 311.27c23.91.25 49.85-.02 98.83.68m-97.59-.7c36.5-.64 72.97-1.42 99.59-1.67"})),(0,a.kt)("path",d({parentName:"g"},{fillRule:"evenodd",strokeWidth:"0",d:"m912.39 308.87-13.72 6.91-3.08-14.28 16.14 7.69"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M910.16 310.22c-3.22 1.09-4.85 2.53-13.72 7.34m14.65-7.36c-4.95 1.73-9.93 3.67-13.14 5.58m-.61 1.44c-.44-4.15.34-5.89-.14-13.75m-.22 13.21c-.39-4.32-.25-9.28-.32-12.85m1.05-.51c3.55.97 6.69 4.49 14.45 6.66m-15.03-7.22c3.92 2.9 8.68 4.7 13.34 7.1m.36-.28s0 0 0 0m0 0s0 0 0 0"}))),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#fab005",strokeWidth:"0",d:"M969.61 278.14c6.85-.35 16.96 4.32 23.18 8.45 6.22 4.14 11.54 9.84 14.15 16.38 2.61 6.55 2.71 15.67 1.51 22.87-1.2 7.2-4.07 15.13-8.71 20.34-4.65 5.21-12.06 9.23-19.16 10.94-7.09 1.71-16.51 1.31-23.41-.66-6.91-1.97-13.4-5.83-18.02-11.16-4.62-5.33-8.74-13.4-9.71-20.81-.97-7.42.85-17.16 3.89-23.69 3.04-6.53 7.35-11.86 14.33-15.47 6.99-3.61 22.28-5.53 27.58-6.19 5.3-.67 4.24 1.51 4.22 2.19m-26.07.78c6.52-2.96 17.49-4.49 24.69-2.92 7.2 1.58 13.53 7.2 18.49 12.36 4.95 5.16 9.65 11.64 11.25 18.61 1.59 6.96.45 16.66-1.67 23.18s-5.78 11.61-11.07 15.96c-5.28 4.35-13.41 9.23-20.65 10.13-7.24.91-16.37-1.08-22.78-4.72-6.41-3.64-12.22-10.86-15.69-17.13-3.47-6.28-5.38-13.47-5.13-20.53.25-7.07 2.6-15.93 6.65-21.86 4.05-5.93 14.6-11.44 17.64-13.73 3.05-2.3.42-.51.62-.06"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M972.6 280.15c6.87.09 16.5 3.23 22.22 7.56 5.72 4.34 9.7 11.61 12.1 18.44 2.4 6.83 3.93 15.52 2.3 22.53-1.62 7.01-6.59 14.47-12.03 19.53-5.45 5.07-13.48 9.66-20.62 10.88-7.15 1.21-15.76-.75-22.25-3.59-6.5-2.84-12.59-7.87-16.72-13.47-4.12-5.6-7.53-12.97-8.04-20.13-.5-7.17 1.35-16.62 5-22.87 3.66-6.25 9.86-11.43 16.91-14.65 7.06-3.22 20.55-4.22 25.4-4.66 4.84-.44 3.86 1.47 3.67 2.03m5.65.87c6.44 2.49 12.63 10.56 16.41 16.73 3.78 6.17 6.3 13.17 6.28 20.3-.02 7.14-2.41 16.39-6.41 22.52-3.99 6.13-10.78 11.53-17.54 14.26-6.76 2.74-16.13 3.25-23.02 2.14-6.88-1.11-13.18-3.89-18.3-8.8-5.12-4.91-10.48-13.63-12.4-20.66-1.93-7.03-1.32-14.46.84-21.53s6.7-16.34 12.12-20.89c5.41-4.56 13.05-6 20.38-6.45 7.32-.44 19.97 3.09 23.57 3.79 3.59.69-1.44-.21-2.02.37"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"34.5",y:"18",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"20",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(936.879 254.5)"}),"Pipeline"),(0,a.kt)("path",d({parentName:"svg"},{fill:"none",stroke:"#000",strokeLineCap:"round",d:"M916 206h268m-268 0h268m0 0c30.67 0 46 15.33 46 46m-46-46c30.67 0 46 15.33 46 46m0 0v92m0-92v92m0 0c0 30.67-15.33 46-46 46m46-46c0 30.67-15.33 46-46 46m0 0H916m268 0H916m0 0c-30.67 0-46-15.33-46-46m46 46c-30.67 0-46-15.33-46-46m0 0v-92m0 92v-92m0 0c0-30.67 15.33-46 46-46m-46 46c0-30.67 15.33-46 46-46"})),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#ced4da",strokeWidth:"0",d:"m994.12 188.66 115.14 3.73 5.8 3.2-2.51 18.51-.57 5.11-5.75.78-115.9-.23-5.49-3.11.96-19.4 1.75-4.95 3.31-1.17"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M992.5 190c31.06-1.55 62.46.28 115 0m-115 0c24.16 1.3 46.76.88 115 0m0 0c5.63 1.55 7.84 1.49 7.5 7.5m-7.5-7.5c3.23 1.26 6.49 3.89 7.5 7.5m0 0c.84 4.23-.74 7.76 0 15m0-15c-.39 4.12.52 6.99 0 15m0 0c1.59 6.24-.55 7.19-7.5 7.5m7.5-7.5c-.93 3.99-.44 9.15-7.5 7.5m0 0c-32.73-.09-66.58-.18-115 0m115 0c-27.44-1.34-54.2-1.35-115 0m0 0c-6.63.04-8.14-3.51-7.5-7.5m7.5 7.5c-5.72-1.69-6.54-1.9-7.5-7.5m0 0c.8-3.9-.2-5.65 0-15m0 15c-.59-5.78.37-10.02 0-15m0 0c-.08-5.55.63-6.06 7.5-7.5m-7.5 7.5c.49-6.52.99-9.26 7.5-7.5"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"60",y:"14",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"16",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(990 195)"}),"Client"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"#228be6",strokeWidth:"0",d:"M1111.92 278.11c6.03-3.56 15.61-4.31 22.6-3.61 6.99.7 13.64 3.31 19.32 7.83 5.69 4.52 12.15 12.52 14.8 19.28 2.66 6.77 3.08 14.37 1.15 21.32-1.92 6.94-7.37 15.27-12.7 20.37-5.33 5.11-12.28 8.76-19.27 10.24-7 1.48-16.14 1.3-22.71-1.36s-12.63-8.52-16.73-14.58c-4.09-6.05-7.22-14.53-7.83-21.76-.62-7.24-.08-15.16 4.14-21.64s16.42-14.31 21.16-17.24c4.75-2.93 6.82-.99 7.29-.35m-3.73-1.02c6.56-1.79 16.64.29 23.71 2.58s14.49 5.74 18.73 11.18c4.24 5.44 6.31 14.44 6.7 21.46.38 7.03-1.47 14.18-4.4 20.69-2.93 6.52-7.37 14.32-13.16 18.39s-14.2 6.53-21.58 6.02c-7.38-.5-16.47-4.49-22.71-9.05-6.24-4.57-11.86-11.81-14.72-18.33-2.85-6.51-3.85-13.55-2.4-20.76 1.44-7.2 5.74-17.28 11.09-22.45 5.34-5.16 17.78-6.81 20.98-8.54 3.2-1.73-1.66-2.09-1.79-1.84"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M1132.84 275.47c6.69-.44 14.5 2.01 20.16 6.2 5.66 4.18 10.94 12.21 13.8 18.88 2.86 6.68 4.6 14.25 3.37 21.14-1.22 6.89-5.53 14.9-10.72 20.2-5.19 5.3-13.31 10.01-20.42 11.61-7.1 1.59-15.33.47-22.23-2.03-6.89-2.5-14.62-7.39-19.14-12.96-4.52-5.58-7.33-13.54-7.97-20.5-.65-6.95.83-14.89 4.1-21.24 3.27-6.35 8.58-13.24 15.53-16.87 6.95-3.64 21.18-4.31 26.18-4.95 5.01-.64 3.98.59 3.83 1.11m5.17 2.1c6.66 1.75 14.99 6.99 19.16 12.47s5.84 13.19 5.85 20.41c.01 7.22-2.43 16.26-5.79 22.92-3.37 6.65-8.08 13.48-14.42 16.99-6.34 3.5-16.25 4.91-23.63 4.04-7.39-.86-15.33-4.94-20.67-9.24-5.35-4.29-8.87-9.83-11.4-16.52-2.53-6.68-5.22-16.18-3.78-23.59s6.96-15.83 12.44-20.86c5.48-5.04 13.53-8 20.45-9.36 6.93-1.36 17.72.57 21.1 1.2 3.39.63-.84 1.81-.79 2.58"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"24.5",y:"18",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"20",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(1106.016 250)"}),"SINK"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M1032.013 312.716c10.87-.14 19.36-2.48 46.63-.12m-48.64-2.2c19.46.02 37.63-.79 48.58-.15"})),(0,a.kt)("path",d({parentName:"g"},{fillRule:"evenodd",strokeWidth:"0",d:"m1077.303 308.986-13.19 5.68 1.36-9.06 14.14 6.03"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#000",d:"M1079.933 311.686c-2.93 1.28-7.65.86-15.57 6m14.06-7.74c-5.11 2.64-11.18 4.41-14.1 5.98m-.32.41c1.1-3.38 1.82-7.19.79-13.73m.02 14.07c.61-5.32 0-10.43-.13-13.19m1.09-.36c3.74 4.19 10.18 3.95 13.12 7.18m-14.16-7.01c2.94 2.47 7.25 3.56 14.47 6.88m-.62.07s0 0 0 0m0 0s0 0 0 0"}))),(0,a.kt)("path",d({parentName:"svg"},{fill:"none",stroke:"#000",strokeDashArray:["8","9"],strokeLineCap:"round",strokeWidth:"1.5",d:"M630.478 250.001c-.14 16.68-.47 83.02-.48 99.86"})),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeDashArray:["8","9"],strokeWidth:"1.5",d:"M350.933 451.05c-6.81-3.33-31.06-7.45-41.21-20.93-10.16-13.48-16.49-49.76-19.71-59.94"})),(0,a.kt)("path",d({parentName:"g"},{fill:"#5c940d",fillRule:"evenodd",strokeWidth:"0",d:"m291.373 368.42 9.1 15.03-13.76 3.44 2.33-17.23"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeWidth:"1.5",d:"M291.333 369.83c1.7 3.86 4.65 7.87 6.94 10.72m.18.82c-1.63.24-3.85 3.02-12.3 4.77m.02-.54c2.18-4.66 2.36-9.86 2.57-15.59m1.27.17s0 0 0 0"}))),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeDashArray:["8","9"],strokeWidth:"1.5",d:"M428.67 450.37c7.14-3.59 32.77-8.55 43.34-21.94 10.56-13.39 16.78-48.5 20.06-58.43"})),(0,a.kt)("path",d({parentName:"g"},{fill:"#5c940d",fillRule:"evenodd",strokeWidth:"0",d:"m492.94 368.33 1.72 16.42-10.35-4.05 6.01-11.28"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeWidth:"1.5",d:"M492.53 371.36c-.99 4.01 1.69 7.49 1.52 12.37m.26 1.94c-4.87-2.07-7.67-2.35-10.83-3.9m-.72.86c1.69-3.8 5.51-8.35 10.06-11.4m-.75-1.23s0 0 0 0"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"100.5",y:"25",fill:"#5c940d",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"28",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(287 461)"}),"Import Pipeline"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeDashArray:["8","9"],strokeWidth:"1.5",d:"M829.985 449.364c-6.82-3.21-29.56-6.32-39.56-19.5-10-13.18-17.09-49.6-20.42-59.59"})),(0,a.kt)("path",d({parentName:"g"},{fill:"#5c940d",fillRule:"evenodd",strokeWidth:"0",d:"m768.405 372.154 11.05 7.95-10.18 6.74-1.2-16.05"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeWidth:"1.5",d:"M769.235 371.034c4.2 3.83 8.35 8.69 10.36 11.68m-.49-.34c-3.23.75-7.37 1.53-10.83 2.92m-1.82-1.11c2.7-5.87 4.41-11.78 3.96-12.9m-.41-1.01s0 0 0 0"}))),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeDashArray:["8","9"],strokeWidth:"1.5",d:"M908.771 450.584c7.02-3.33 31.48-7.58 41.86-21.01 10.37-13.43 17.06-49.67 20.4-59.57"})),(0,a.kt)("path",d({parentName:"g"},{fill:"#5c940d",fillRule:"evenodd",strokeWidth:"0",d:"m972.911 369.794-.89 16.83-8.82-7.05 8.35-10"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeWidth:"1.5",d:"M971.801 369.864c.01 3.9 1.14 6.82 2.82 15.89m-.33-.29c-3.89-.65-7.79-1.75-12.64-2.95m-1.11-.26c2.67-2.62 5.23-7.1 11.51-13.45m-1.02 1.2s0 0 0 0"}))),(0,a.kt)("text",d({parentName:"svg"},{x:"101",y:"25",fill:"#5c940d",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"28",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(766.317 460.974)"}),"Export Pipeline"),(0,a.kt)("text",d({parentName:"svg"},{x:"98.5",y:"25",fill:"#5c940d",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"28",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(530 70)"}),"Server Pipeline"),(0,a.kt)("text",d({parentName:"svg"},{x:"93",y:"25",fill:"#5c940d",fontFamily:"Virgil, Segoe UI Emoji",fontSize:"28",style:{whiteSpace:"pre"},textAnchor:"middle",transform:"translate(530 10)"}),"Client Pipeline"),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeDashArray:["8","9"],strokeWidth:"1.5",d:"M511.16 29.21c-43.05 6.83-206.9 17.77-260.43 41.51-53.52 23.75-50.75 84.34-60.73 100.95"})),(0,a.kt)("path",d({parentName:"g"},{fill:"#5c940d",fillRule:"evenodd",strokeWidth:"0",d:"m190.03 170.94-.26-12.24 11.75.46-11.75 11.36"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeWidth:"1.5",d:"M189.01 172.58c1.47-4.32 1.19-6.46-1.65-16.95m1.35.55c1.29 1.69 4.92 2.56 11.59 5.46m1.17.3c-5.12.31-5.43 4.06-12.35 8.63m.88 1.1s0 0 0 0"}))),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeDashArray:["8","9"],strokeWidth:"1.5",d:"M729.58 29.78c39.81 6.37 190.28 15.67 240.4 39.17 50.12 23.51 50.4 85.1 60.32 101.86"})),(0,a.kt)("path",d({parentName:"g"},{fill:"#5c940d",fillRule:"evenodd",strokeWidth:"0",d:"m1031 172.39-10.04-14.51 12.96-1.46-2.61 15.45"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeWidth:"1.5",d:"M1030.02 170.79c-5.1-4.52-7.06-9.87-10.8-12.24m1.4 1.39c4.17-1.72 7.61-4.07 12.44-3.78m-.96-.71c-1.12 5.94-1.29 11.27-3.17 15.4m1.37-.04s0 0 0 0"}))),(0,a.kt)("g",d({parentName:"svg"},{strokeLineCap:"round"}),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeDashArray:["8","9"],strokeWidth:"1.5",d:"M630.4 110.26c.1 10.04.48 50.16.32 60.06"})),(0,a.kt)("path",d({parentName:"g"},{fill:"#5c940d",fillRule:"evenodd",strokeWidth:"0",d:"m630.78 171.22-7.56-13.48 15.14-.23-5.65 12.85"})),(0,a.kt)("path",d({parentName:"g"},{fill:"none",stroke:"#5c940d",strokeWidth:"1.5",d:"M631.05 171.22c-1.89-5.8-4.65-8.94-5.18-14.71m-1.41.01c2.83-.46 5.19.11 13.71.78m-.53.12c-2.4 3.48-2.74 6.09-8.14 13.2m1.22-.3s0 0 0 0"})))))),(0,a.kt)("p",null,"The flexible combination of location and type of pipeline type enables multiple\nuse cases:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",d({parentName:"tr"},{align:null}),"Location"),(0,a.kt)("th",d({parentName:"tr"},{align:null}),"Type"),(0,a.kt)("th",d({parentName:"tr"},{align:null}),"Use case"),(0,a.kt)("th",d({parentName:"tr"},{align:null}),"Example"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Client"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Import"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Enrichment"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Add community ID to flow telemetry")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Server"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Import"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Compliance"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Anonymize PII data")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Client"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Export"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Post-processing"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Compute expensive function (e.g., string entropy)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Server"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Export"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Access control"),(0,a.kt)("td",d({parentName:"tr"},{align:null}),"Remove sensitive fields")))),(0,a.kt)("p",null,"Deploying a pipeline involves involves two separate configuration steps:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Define the pipeline"),(0,a.kt)("li",{parentName:"ol"},"Trigger the pipeline")),(0,a.kt)("p",null,"The trigger determines when and where a pipeline executes. Here is an example\nconfiguration:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-yaml"}),"vast:\n  pipelines:\n     example_pipeline: |\n       operator1\n       | operator2\n  pipeline-triggers:\n    import:\n      - pipeline: example_pipeline\n        location: server\n        events: [intel.ioc, zeek.conn]\n")),(0,a.kt)("p",null,"Triggers are defined under configuration key ",(0,a.kt)("inlineCode",{parentName:"p"},"vast.pipeline-triggers"),". The two\nsubkeys ",(0,a.kt)("inlineCode",{parentName:"p"},"import")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"export")," specify the pipeline type the trigger itself is a\ndictionary with three keys:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"pipeline"),": the name one of a previously defined pipeline"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"location"),": either ",(0,a.kt)("inlineCode",{parentName:"li"},"server")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"client")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"events"),": a list of event types for which the pipeline fires")),(0,a.kt)("p",null,"The above example configures ",(0,a.kt)("inlineCode",{parentName:"p"},"example_pipeline")," to run at on the server side\nduring import for the two events ",(0,a.kt)("inlineCode",{parentName:"p"},"intel.ioc")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"zeek.conn"),"."),(0,a.kt)("h2",d({},{id:"modify-data-at-rest"}),"Modify data at rest"),(0,a.kt)("h3",d({},{id:"delete-old-data-when-reaching-storage-quota"}),"Delete old data when reaching storage quota"),(0,a.kt)("p",null,"VAST's disk-monitoring feature enables periodic deletion of events based on\nutilized disk storage. To limit the disk space used by the VAST database,\nconfigure a disk quota:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-bash"}),"vast start --disk-quota-high=1TiB\n")),(0,a.kt)("p",null,"Whenever VAST detects that its database directory has grown to exceed the\nconfigured quota, it will erase the oldest data in the database. It is possible\nto specify an additional ",(0,a.kt)("inlineCode",{parentName:"p"},"--disk-quota-low")," option to define a corridor for\nthe disk space usage. This can be used to avoid having VAST running permanently\nat the upper limit and to instad batch the deletion operations together."),(0,a.kt)("p",null,"The full set of available options looks like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-yaml"}),"vast:\n  start:\n    # Triggers removal of old data when the DB dir exceeds the disk budget.\n    disk-budget-high: 0K\n    # When the DB dir exceeds the budget, VAST erases data until the directory size\n    # falls below this value.\n    disk-budget-low: 0K\n    # Seconds between successive disk space checks.\n    disk-budget-check-interval: 90\n")),(0,a.kt)("admonition",d({},{type:"note"}),(0,a.kt)("p",{parentName:"admonition"},"When using this method, we recommend placing the log file outside of the\ndatabase directory. It counts towards the size calculations, but cannot be\nautomatically deleted during a deletion cycle.")),(0,a.kt)("h3",d({},{id:"transform-old-data-when-reaching-storage-quota"}),"Transform old data when reaching storage quota"),(0,a.kt)("p",null,"Instead of just deleting data periodically, VAST can also trigger ",(0,a.kt)("strong",{parentName:"p"},"spatial\ncompaction")," when exceeding a given disk budget. A spatial compaction cycle\ntransforms data until disk usage falls below the budget, e.g., by removing\ncolumns or rows from certain events, or by deleting them entirely."),(0,a.kt)("p",null,"When the disk budget exceeds the configured threshold, VAST decides what data\nto compact. The compaction ",(0,a.kt)("em",{parentName:"p"},"mode")," defines how this happens. Currently, there\nexists only one mode: ",(0,a.kt)("a",d({parentName:"p"},{href:"#weighted-age"}),"weighted age"),"."),(0,a.kt)("p",null,"This compaction mode selects all events according to a ",(0,a.kt)("em",{parentName:"p"},"weighted age"),". To\ncompute the weighted age, VAST divides the actual age of an event with the\nweight assigned to this event type. For example, applying a weight of 100 to an\nevent that is 100 days old would yield a weighted age of 1 day. This causes it\nto be transformed after events that are 50 days old. Conversely, a weights less\nthan one results in an older weighted age, resulting in earlier consideration in\na compaction cycle."),(0,a.kt)("p",null,"The default weight is 1 for all event types. Here is an example configuration\nthat adjusts the weights:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-yaml"}),"vast:\n  plugins: [compaction]\nplugins:\n  compaction:\n    space:\n      mode: weighted-age\n      interval: 6 hours\n      disk-budget-high: 10TiB\n      disk-budget-low:   8TiB\n      weights:\n        - weight: 0.1\n          types: [suricata.flow]\n          #pipeline: fancy_flow_compaction\n        - weight: 100\n          types: [suricata.alert]\n          #pipeline: fancy_alert_compaction\n")),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"pipeline")," key for each type is optional. If present, the corresponding\npipeline processes all matching events. If absent, VAST deletes matching events."),(0,a.kt)("p",null,"Two additional keys are useful to fine-tune the behavior of the compaction\nplugin:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"compaction.space.scan-binary"),": an absolute path to a binary that should be\nexecuted to determine the current disk usage"),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"compaction.space.step-size"),": adjust how many compaction candidates should be\nprocessed before re-checking the size of the database directory")),(0,a.kt)("h3",d({},{id:"transform-data-after-exceeding-a-retention-span"}),"Transform data after exceeding a retention span"),(0,a.kt)("p",null,"VAST triggers temporal compaction according to a set of rules that define how\nto transform events after they reach a specfic age. This declarative\nspecification makes it easy to express fine-grained data retention policies,\nwhich is often needed for regulatory requirements and compliance."),(0,a.kt)("p",null,"For each compaction cycle, VAST processes all rules and identifies what subset\nof the data has become subject to transformation. To this end, each rule\ndefines a ",(0,a.kt)("em",{parentName:"p"},"minimum")," age, i.e., a lower bound that must be exceeded before the\ncorresponding events undergo their configured pipeline."),(0,a.kt)("p",null,"To configure temporal compaction, provide a list of compaction rules under the\nkey ",(0,a.kt)("inlineCode",{parentName:"p"},"plugins.compaction.time")," in the VAST configuration. A compaction rule\ndefines the minimum age using key ",(0,a.kt)("inlineCode",{parentName:"p"},"after"),", the pipeline to apply with the\nkey ",(0,a.kt)("inlineCode",{parentName:"p"},"pipeline"),", the scope in terms of schema using the key ",(0,a.kt)("inlineCode",{parentName:"p"},"types"),", and a name\nto uniquely refer to the rule. Omitting the ",(0,a.kt)("inlineCode",{parentName:"p"},"types")," key causes temporal\ncompaction rules to be applied to all schemas."),(0,a.kt)("p",null,"By default, a compaction rule consumes its input, i.e. it erases the original\nevents from the database and replaces them with the transformed events. The\n",(0,a.kt)("inlineCode",{parentName:"p"},"preserve-input")," option can be specified on a temporal compaction rule to override\nthis behavior and to keep the input partitions available."),(0,a.kt)("admonition",d({},{type:"note"}),(0,a.kt)("p",{parentName:"admonition"},"VAST applies each rule only once per partition and stores the applied rule name\nwithin the partition meta data. If you rename a rule in the configuration and\nreload a new compaction configuration, already compacted partitions will undergo\nanother round of compaction.")),(0,a.kt)("p",null,"The pipelines referenced in the compaction configuration must be defined in the\nVAST configuration."),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-yaml"}),'vast:\n  plugins: [compaction]\n  pipelines:\n    anonymize_urls: |\n      replace net.url="xxx"\n    aggregate_flows: |\n       summarize \n         pkts_toserver=sum(flow.pkts_toserver),\n         pkts_toclient=sum(flow.pkts_toclient),\n         bytes_toserver=sum(flow.bytes_toserver),\n         bytes_toclient=sum(flow.bytes_toclient),\n         start=min(flow.start),\n         end=max(flow.end)\n       by\n         timestamp,\n         src_ip,\n         dest_ip\n       resolution\n         10 mins\nplugins:\n  compaction:\n    time:\n      # How often to check the `after` condition below.\n      interval: 1 day\n      rules:\n        - after: 2 days\n          name: uri_scrubbing\n          pipeline: anonymize_urls\n          types:\n            - zeek.http\n            - suricata.http\n        - after: 7 days\n          name: flow_reduction\n          pipeline: aggregate_flows\n          keep: true\n          types:\n            - suricata.flow\n')),(0,a.kt)("h3",d({},{id:"trigger-a-compaction-manually"}),"Trigger a compaction manually"),(0,a.kt)("p",null,"You can also interact with the compaction plugin on the command line, through\nthe ",(0,a.kt)("inlineCode",{parentName:"p"},"compaction")," subcommand. Use the ",(0,a.kt)("inlineCode",{parentName:"p"},"list")," subcommand to show all configured\ncompaction rules:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-bash"}),"vast compaction list\n")),(0,a.kt)("p",null,"You can then trigger a compaction manually with the ",(0,a.kt)("inlineCode",{parentName:"p"},"run")," sub-command:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-bash"}),"vast compaction run <rule>\n")),(0,a.kt)("admonition",d({},{type:"note"}),(0,a.kt)("p",{parentName:"admonition"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"compaction")," plugin needs to be loaded both by the client and the server process to\nuse the ",(0,a.kt)("inlineCode",{parentName:"p"},"vast compaction")," subcommand.")),(0,a.kt)("p",null,"For an overview of the current status of the compaction plugin, you can use the ",(0,a.kt)("inlineCode",{parentName:"p"},"vast status")," subcommand:"),(0,a.kt)("pre",null,(0,a.kt)("code",d({parentName:"pre"},{className:"language-bash"}),"vast status | jq .compaction\n")))}D.isMDXComponent=!0}}]);